# Tinkoff Trading Bot - –¢–æ—Ä–≥–æ–≤—ã–π –ë–æ—Ç-–ü–æ–º–æ—â–Ω–∏–∫

## –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ —á–µ—Ä–µ–∑ Tinkoff Invest API —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ VWAP –∏ EMA –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üöÄ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Clean Architecture —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏
- üìä **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è**: VWAP + EMA Crossover —Å —Å–∏—Å—Ç–µ–º–æ–π –æ—Ü–µ–Ω–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
- ‚ö° **Real-time –¥–∞–Ω–Ω—ã–µ**: gRPC –ø–æ—Ç–æ–∫–∏ –∫–æ—Ç–∏—Ä–æ–≤–æ–∫, —Å—Ç–∞–∫–∞–Ω–∞ –∏ –ª–µ–Ω—Ç—ã —Å–¥–µ–ª–æ–∫
- üéØ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–æ–∑–∏—Ü–∏–π
- üñ•Ô∏è **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI**: JavaFX –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ó–∞—â–∏—â–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–¥–µ–ª–æ–∫

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Java 11+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **JavaFX 17** - –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **Tinkoff Invest API SDK** - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∏—Ä–∂–µ
- **Ta4j** - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- **Maven** - —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **Logback** - —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Java 11 –∏–ª–∏ –≤—ã—à–µ
- Maven 3.6+
- Git

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
git clone https://github.com/your-repo/tinkoff-trading-bot.git
cd tinkoff-trading-bot
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API —Ç–æ–∫–µ–Ω–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Tinkoff –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏](https://www.tinkoff.ru/invest/)
2. –ó–∞–π–¥–∏—Ç–µ –≤ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí API
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω —Å –ø—Ä–∞–≤–∞–º–∏ "–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø"
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
export TINKOFF_API_TOKEN=your_token_here
export SANDBOX_MODE=true  # false –¥–ª—è –±–æ–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞
```

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫
mvn clean compile
mvn javafx:run

# –ò–ª–∏ —á–µ—Ä–µ–∑ JAR —Ñ–∞–π–ª
mvn clean package
java -jar target/tinkoff-trading-bot-1.0.0-shaded.jar
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
src/main/java/com/tradingbot/tinkoff/
‚îú‚îÄ‚îÄ api/                 # –†–∞–±–æ—Ç–∞ —Å Tinkoff API
‚îÇ   ‚îú‚îÄ‚îÄ TinkoffApiConnector.java
‚îÇ   ‚îî‚îÄ‚îÄ MarketDataProcessor.java
‚îú‚îÄ‚îÄ model/              # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ TradingSignal.java
‚îÇ   ‚îú‚îÄ‚îÄ Portfolio.java
‚îÇ   ‚îî‚îÄ‚îÄ Instrument.java
‚îú‚îÄ‚îÄ strategy/           # –¢–æ—Ä–≥–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ VWAPEMAStrategy.java
‚îÇ   ‚îî‚îÄ‚îÄ TechnicalAnalyzer.java
‚îú‚îÄ‚îÄ risk/              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ RiskManager.java
‚îú‚îÄ‚îÄ ui/                # JavaFX –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îú‚îÄ‚îÄ view/
‚îÇ   ‚îî‚îÄ‚îÄ css/
‚îî‚îÄ‚îÄ TinkoffTradingBotApplication.java
```

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏

### –ë–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞

–°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏:

1. **VWAP** (Volume Weighted Average Price) - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç—Ä–µ–Ω–¥–∞
2. **EMA Crossover** (9/21) - —Å–∏–≥–Ω–∞–ª—ã –≤—Ö–æ–¥–∞ –≤ –ø–æ–∑–∏—Ü–∏—é
3. **ATR** (Average True Range) - —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–ø-–ª–æ—Å—Å–æ–≤
4. **Order Book –∞–Ω–∞–ª–∏–∑** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤

### –°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ (0-100 –±–∞–ª–ª–æ–≤)

| –§–∞–∫—Ç–æ—Ä | –ë–∞–ª–ª—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-------|----------|
| EMA –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –≤ —Ç—Ä–µ–Ω–¥–µ | 40 | –û—Å–Ω–æ–≤–Ω–æ–π —Å–∏–≥–Ω–∞–ª |
| –¶–µ–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ VWAP | 20 | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ |
| –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ | 15 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π |
| –õ–µ–Ω—Ç–∞ —Å–¥–µ–ª–æ–∫ | 15 | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ |
| –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å ATR | 10 | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞ |

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏: 70**

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏

- **–†–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É**: 1-2% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∏—Å–∫/–ø—Ä–∏–±—ã–ª—å**: –º–∏–Ω–∏–º—É–º 1:1.5
- **–§–æ—Ä–º—É–ª–∞ –ø–æ–∑–∏—Ü–∏–∏**: `(–ö–∞–ø–∏—Ç–∞–ª √ó %—Ä–∏—Å–∫–∞) / |–í—Ö–æ–¥ - –°—Ç–æ–ø–õ–æ—Å—Å|`
- **–ú–∞–∫—Å–∏–º—É–º –≤ –æ–¥–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏**: 50% –∫–∞–ø–∏—Ç–∞–ª–∞

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ

- üéÆ **–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –°—Ç–∞—Ä—Ç/–°—Ç–æ–ø —Ç–æ—Ä–≥–æ–≤–ª–∏
- üìä **–ö–∞—Ä—Ç–æ—á–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- üìà **–ì—Ä–∞—Ñ–∏–∫**: Real-time –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
- üìã **–õ–æ–≥ —Å–æ–±—ã—Ç–∏–π**: –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –æ—à–∏–±–æ–∫

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏

- üîë **API —Ç–æ–∫–µ–Ω**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º
- üìà **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**: –°–ø–∏—Å–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö –∞–∫—Ç–∏–≤–æ–≤
- ‚öñÔ∏è **–†–∏—Å–∫–∏**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ —Ä–∏—Å–∫–∞ –Ω–∞ —Å–¥–µ–ª–∫—É
- üé® **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –¢–µ–º—ã –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–´–ï –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø**:

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Ç–æ–∫–µ–Ω—ã** –≤ –∫–æ–¥–µ –∏–ª–∏ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö
2. **–ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –ø–µ—Å–æ—á–Ω–∏—Ü—ã** (SANDBOX_MODE=true)
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Å—É–º–º–∞—Ö** –ø–µ—Ä–µ–¥ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º –∑–∞–ø—É—Å–∫–æ–º
4. **–°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ä–∏—Å–∫–∞–º–∏** - –±–æ—Ç –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø—Ä–∏–±—ã–ª—å
5. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏
tail -f logs/trading-bot.log

# –¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã
tail -f logs/trading-signals.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫
grep ERROR logs/trading-bot.log
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
mvn test

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
mvn test jacoco:report
```

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

1. –°–º–µ–Ω–∏—Ç–µ `SANDBOX_MODE=false`
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus + Grafana)
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –ø–æ email/Telegram

### Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t tinkoff-trading-bot .

# –ó–∞–ø—É—Å–∫
docker run -e TINKOFF_API_TOKEN=your_token tinkoff-trading-bot
```

## FAQ

**Q: –ú–æ–∂–Ω–æ –ª–∏ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ?**
A: –î–∞, –¥–æ–±–∞–≤—å—Ç–µ –Ω—É–∂–Ω—ã–µ FIGI –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**Q: –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–∏—Å–∫–∞?**
A: –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö UI –∏–ª–∏ —á–µ—Ä–µ–∑ `application.properties`.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω, –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üìß **Email**: support@yourcompany.com
- üí¨ **Telegram**: @your_support_bot
- üìö **Wiki**: [–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://github.com/your-repo/wiki)

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE)

---

**–î–∏—Å–∫–ª–µ–π–º–µ—Ä**: –î–∞–Ω–Ω–æ–µ –ü–û –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π. –¢–æ—Ä–≥–æ–≤–ª—è –Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä—ã–Ω–∫–∞—Ö —Å–æ–ø—Ä—è–∂–µ–Ω–∞ —Å —Ä–∏—Å–∫–∞–º–∏. –ê–≤—Ç–æ—Ä—ã –Ω–µ –Ω–µ—Å—É—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –≤–æ–∑–º–æ–∂–Ω—ã–µ —É–±—ã—Ç–∫–∏.
